# 前言
计算机网络学习的核心就是网络协议的学习。那么什么是网络协议？

网络协议是为计算机网络中进行数据交换而建立的规则、标准的集合，是一种人为的约定。

比如说不同的计算机之间，很可能使用着不同的字符集，那么他们之间传输数据，就会出现问题。一个电脑上显示的“你好世界”，到另一个电脑上可能就变成了“烫烫烫”。所以传输数据，必须通过协议进行。

目前，互联网普遍使用TCP/IP协议

# OSI网络模型
以下是对模型的图文解释

![](./src/CN_1.png)
![](./src/CN_2.jpg)
在该模型的每一层中都会有一个专属协议，完成该层的工作，并向上下层传输数据。

接下来我们以OSI网络模型对计算机网络进行学习：
# 物理层
该层用来提供可靠的物理媒介用于稳定安全地传输原始数据
以下是物理层的各种设备：
## 中继器
中继器（RP repeater）是对信号进行再生和还原的网络设备。。适用于完全相同的两类网络的互连，主要功能是通过对数据信号的重新发送或者转发，来扩大网络传输的距离。

## 集线器
集线器（HUB）就是将网线集中到一起的机器，也就是多台主机和设备的连接器。集线器的主要功能也有扩大网络的传输距离，他是中继器的一种形式。区别在于集线器能够提供多端口服务，所以也被称为多口中继器。
集线器的基本功能是信息分发，它把一个端口接收的所有信号向所有端口分发出去。一些集线器在分发之前将弱信号重新生成，一些集线器整理信号的时序以提供所有端口间的同步数据通信。

## 交换机
交换机(Switch) 也叫交换式集线器，是的，它是集线器的plus版。它通过对信息进行重新生成，并经过内部处理后转发至指定端口，具备自动寻址能力和交换作用。
由于交换机根据所传递信息包的目的地址，将每一信息包独立地从源端口送至目的端口，避免了和其他端口发生碰撞。
广义的交换机就是一种在通信系统中完成信息交换功能的设备。 

## 路由器
路由器(Router)是网络中进行网间连接的关键设备。作为不同网络之间互相连接的枢纽，路由器系统构成了基于 TCP/IP 的国际互连网络 Internet 的主体脉络。 
路由器的基本功能是，把数据（IP 报文）传送到正确的网络，细分则包括：

1.IP 数据报的转发，包括数据报的寻径和传送；

2.子网隔离，抑制广播风暴；

3.维护路由表，并与其它路由器交换路由信息，这是 IP 报文转发的基础；

4.IP 数据报的差错处理及简单的拥塞控制；
5.实现对 IP 数据报的过滤和记帐; 

# 数据链路层
数据链路层为上层在不可靠的物理介质上提供可靠的传输。
>物理层：我很可靠
>数据链路层：不，你不可靠，我才可靠

该层主要有以下几个作用：
- 物理地址寻址
- 数据的成帧
- 流量控制
- 数据的检错和重发

## 封装成帧
帧是该层的数据的基本单位，是一串数据。该层传输数据使用透明传输的原则，也就是控制字符和要传输的数据储存在同一个帧里面，但是在读取的时候会无视控制字符

## 如何检错
- 奇偶校验码：以二进制方式。统计帧里面有几个1，然后在头添加0或1进行标记，说明该帧有几个1。如果检查时发现不对，说明该帧数据出错
- 循环冗余检验码：根据传输或保存的数据而产生固定位数校验码。
## 最大传输单位MTU
最大传输单位(Maximum Transmission Unit)，这是用来确定帧的大小的，取决于具体的物理设备。相当于物理设备是公路，公路多宽就是MTU。显然，当传输时看最窄的那个，也就是取最小的MTU作为整个数据链路层的MTU。

## 以太网协议
这个协议就是数据链路层所使用的协议，我们来看该协议下的数据帧大概长什么样：
![](./src/CN_3.png)
- 类型：用来标识上层使用的是什么协议
- 目的地址和源地址：使用MAC地址
- 数据：使用上层协议封装起来的数据
- CRC：循环冗余码
- 最短的帧：以太网规定最短帧应该是64节 
### MAC地址
是一组长为6字节的数。MAC地址要求每个网络适配器都必须有唯一的MAC地址（唯一性）

MAC广播地址：FF-FF-FF-FF-FF-FF

# 网络层
网络层的目的是实现两个端系统之间的数据透明传送。

网络层的功能包括寻址和路由选择、连接的建立、保持和终止等。此外，网络层还可以实现拥塞控制、网际互连等功能；

网络层中包含了众多协议且非常重要，其中最重要的协议就是IP协议

网络层的基本数据单位为IP数据段

几个重要协议：
- IP协议（Internet Protocol，因特网互联协议）;
- ICMP协议（Internet Control Message Protocol，因特网控制报文协议）;
- ARP协议（Address Resolution Protocol，地址解析协议）;
- RARP协议（Reverse Address Resolution Protocol，逆地址解析协议）。

